<?php/*数据库函数库*//** * 连接数据库 */function connect($host = 'localhost',$username='root',$password='',$db='0316_sql'){	$link = mysql_connect($host,$username,$password);	if(!$link){		die(mysql_error());	}	if(!mysql_select_db($db)){		die(mysql_error());	}	mysql_query('set names utf8');	return $link;}/** * 获取列表 */function getList($table,$offset,$per_page,$con = '1'){	//1、先把指定的功能在函数中实现	//2、必须参数	//3、考虑复用的参数		$sql = "select * from $table where $con order by id desc limit $offset,$per_page";	$query = mysql_query($sql);	$result = array();	//列表肯定是多行的	while($row = mysql_fetch_assoc($query)){		$result[] = $row;	}	return $result;}/** * 获取单条 * @param $table 表名 * @param $con 条件 */function getOne($table,$con = '1'){	$sql = "select * from $table where $con";//select * from news where 1	$query = mysql_query($sql);	$result = mysql_fetch_assoc($query);	return $result;}/** * 添加 * 由于表名不一样，所以字段也肯定会不一样，所以字段也应该作为参数存在 * @param $data 条件数组 array('字段1'=>'值1','字段2'=>'值2',.....) */function insert($table,$data){	$key_str = '';	$value_str = '';	foreach($data as $key=>$value){		//echo $key.':'.$value.'<br>';		$key_str .= '`'.$key.'`,';		$value_str .= '"'.$value.'",';	}	$key_str = substr($key_str,0,-1);//由于遍历多了一个','，所以截取字符串到最后一个逗号为止	$value_str = substr($value_str,0,-1);	$sql = "insert into $table($key_str) values($value_str)";	$query = mysql_query($sql);	//返回判断添加成功或不成功——返回受影响行数	return mysql_affected_rows();}function update($table,$data){	$update_str = '';	foreach($data as $key=>$value){		$update_str .= "`$key`='$value',";	}	$update_str = substr($update_str,0,-1);	$sql = "update news set $update_str where id=".$data['id'];	$query = mysql_query($sql);	return mysql_affected_rows();}function delete($table,$id){	$sql = "delete from news where id = $id";	$query = mysql_query($sql);	return mysql_affected_rows();}